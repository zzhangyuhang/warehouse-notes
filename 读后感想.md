# 读后感想
**历时一个月终于把这本书读完了,说实话真的很枯燥.因为这本书全是概念,别说代码,一行SQL都没有,完全是将数据仓库相关的概念.开始读的时候真的很头疼.一是读不懂,二是对概念之类的东西没有那么多的兴趣.但是强迫自己读了下来.**

**当我读到数据仓库设计的时候,一下子就提起兴趣了.因为在第一段实习经历中,只是简单的接触了一下HIVE数据仓库这个东西,只知道这个数据仓库能用SQL来查询数据.只是会用HIVE SHELL来完成别人提供的需求,很机械化.根本就没有对表名啊,库名啊产生任何思考.然而到了第二段实习中,首先接触的就是数据分层,ODS,DW,DM.开始的想法就是对不同的数据进行分一下层呗,好管理好维护.但是我错了,真的不是分层管理这么简单.**

**首先,为什么要对数据仓库进行分层管理呢?因为数据粒度的原因,当数据粒度很低的时候,数据很细节,基本上就是做了数据的去脏和简单转化,这样的数据能完成大部分的需求和业务.但是问题也很明显就是在完成业务的时候,因为数据太细节化了导致花费时间很长,很浪费时间.当数据粒度很高的时候,就是数据进行聚合汇总,这样的数据只能完成一部分的需求和业务,但是这样的数据查询的时候性能很好,速度很快.能够及时响应.那我们要如何选择呢?要哪个?小孩子才做选择题,大人当然是两个都要.数据仓库中的数据采用双重粒度来保存.那就保存呗,一股脑都扔进去不就好了.但是这样两块的数据就有很高的耦合度,很难维护,也很难扩展.那么怎么办?分层处理吧,ODS用来保存从操作型环境过来的细节数据,DW层来保存聚合的数据.**

**当然采用双粒度数据存储的最终目的就是为了解决业务需求,当然做了数据聚合还是不能很好给业务提供很好的支持.怎么办呢?建立数据集市呀.数据集市是根据某个业务为主题依据细节数据和聚合数据建造的多维数据模型.建立好数据集市了,就能很好的处理相应的业务问题了.当然这个数据集市并不能重用,一个数据集市对应一个业务.这个数据集市就是DW的再上一层DM层.**

**在实际的数据仓库中,从操作环境过来的数据并不是直接进入ODS层的,而是要经过ETL的才可以进入ODS层的.其实ODS层之前还有个stage层,这个层中的数据才是真的原子数据.但是这样的数据用处并不大,因为这些数据有用的部分很少.一般直接将stage层中的数据导入kafka中来做实时处理.**

**上面说到的是我现在的实习公司的数据仓库分层.一个数据仓库中包括了四层stage,ODS,DW,DM.书中所讲的并不是这个样子.书中所讲的数据仓库是一个独立的概念,保存了双重粒度的数据,ODS并不是数据仓库的一部分,更不可能是其中一层.ODS是从数据仓库中的细节数据导入的概念记录的集合而已,是独立的存在,适用于实时环境的数据提取.还有一点不同就是,操作型环境产生的原始数据并没有直接进入ODS,而是通过粒度管理器来进入数据仓库.这与我们通过对原始数据ETL进入ODS层又不太一样.还有说的数据集市层,书中作者也是将其与数据仓库的概念分离开,不是以一个层级存在,而是以一个独立的数据库的形式存在的.书中所讲的比较符合现在的就是关系模型和多维模型了,现在的数据集市依旧采用多维模型,而那些操作型数据,比如说ODS层中的数据,或者MYSQL中的数据都是关系型模型.关系型模型灵活度高,但是应对业务的性能差.多维型模型灵活度低,对业务支持好.**

**那么书中这么写是错的吗?还是公司的设计是错的呢?我的理解是,谁都没有错.数据仓库的设计是活的,根据公司数据模型建立的,不同的公司数据模型也肯定不相同,而且书比较老,所处时代也是不同的,根本没法做对错判断,只能当做参考来学习.同时我还浏览了一些CSDN上的数据仓库设计的帖子,基本上也是像我现在这个公司一样采用双粒度分层然后建立数据集市的分层方法.因为我并没有自己亲身设计过数据仓库,还在入门的水平,并不能感觉出这样分层的好坏,以及缺点.现在做个简单的了解一下,希望以后有机会真的去亲身实践去设计数据仓库的时候有所帮助.**